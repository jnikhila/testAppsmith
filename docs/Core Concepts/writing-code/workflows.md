---
description: >-
  Multiple Queries can be triggered in serial/parallel/conditional when a user
  interacts with a widget
---

# Creating Workflows

When you build an app on Appsmith, you manipulate data; add, update, delete and retrieve data, add actions and trigger them. You use Javascript functions, APIs, or Queries to build different workflows.

{% hint style="info" %}
To create workflows, you should be familiar with [triggering actions](<../../reference/appsmith-framework/README (1).md#functions>) from [widgets](broken-reference/) and expand on triggering more complex actions.
{% endhint %}

## **Fields**

The widgets have fields you can use to bind data or trigger operations. Appsmith has segregated the fields into Sync and Async fields.

### **Sync Fields**

Whenever you drag a widget on the canvas, you can select it and see the properties associated with it in the properties pane. The fields that expect input or data in the properties pane are called Sync Fields.

![Input widget - Sync Fields](<../../.gitbook/assets/Writing Code  Creating Workflows  Sync Fields  Input Widget.png>)

For example, if you have added an Input widget to the canvas, the properties like MaxChars, Regex, Error Message, and so on expect some input and are Sync Fields.

### **Async Fields**

The properties that can trigger an action or perform an operation are called Async Fields.

![Input Widget - Async Fields](<../../.gitbook/assets/Writing Code  Creating Workflows  Async Fields  Input Widget.png>)

For example, the properties like `OnTextChanged` and `OnSubmit` of an input widget are considered async fields. You can use these properties to define an action or perform an [operation](<../../reference/appsmith-framework/README (1).md#functions>).

### **Use an Async Function Response in a Sync Field**

{% embed url="https://youtu.be/yn_8gs5w04g" %}

Let's look at some examples to understand how you can use async functions in sync fields.

#### **Use case**

You are fetching all the users and displaying information like First Name, Last Name, Email, and more on a page. You have a table widget to display the data.

**Using an API**

You have an API that fetches Users. You want to trigger the API execution, so you bind the API call to the widget, and the response generated will be shown in the table.

To add a Table widget; Navigate to `Explorer` >> Click on `Widgets` >> Search `table` >> Drag a table widget onto the canvas.&#x20;

{% embed url="https://youtu.be/iYZV9DPnugY" %}
How to call API in the Sync field?
{% endembed %}

To read data by using an API: Create an API - `getAllUsers` on Appsmith by adding the `API` from `Explorer` >> Click `(+)` Query/JS  >> Select `New Blank API`  >> Rename to `getAllUsers` (or select an existing API) Add API call to the table data property of a table widget as shown in the code snippet below:

```
 {{getAllUsers.data}}
```

{% hint style="info" %}
The [table data property of a table](../../reference/widgets/table/#table-data) requires a **JSON Array** so verify that your API returns a **JSON Array**.
{% endhint %}

A <mark style="color:red;">`{{API.run()}}`</mark> method, if supplied to the [Table data](../../reference/widgets/table/#table-data), will throw an error, as table data is a Sync field and cannot perform the execution. However, you can read the response generated by the API by accessing the data property <mark style="color:red;">`{{API.data}}`</mark> of an API. When you bound an API data property to a widget, Appsmith executes the API **on page load**. You can modify the API settings if you wish not to execute the API **on page load**.

**Using a JSObject**

You have a JSObject function that fetches all Users' information, filters data for `firstname` & `email,` and then returns the result so you can bind it to the table widget and display information.

{% embed url="https://youtu.be/8mVQS6uaR6M" %}
How to call an async JSObject function from a Sync Field?
{% endembed %}

To read the data by calling a JSObject function: Create a JSObject - `getFilteredUsersList` on Appsmith by adding a `JSObject` from `Explorer` >> Click `(+)` Query/JS >> Select `New JS Object` >> Rename to `getFilteredUsersList` (or select an existing JSObject) You can add your API or Query Call to the function call and filter the data for the required details as below:

```
export default {
	userFilteredList: async () => {
	const listUser = await getAllUsers.run();
		return listUser.map((user) => {
			return {
				"firstname" : user.name,
				"email" : user.email
			}
		})		
	}
}
```

A function call to the JSObject <mark style="color:red;">`getFilteredUsersList.userFilteredList()`</mark> will throw an error as table data is a sync field and cannot perform function execution. However, you can use the JSObject function response by adding <mark style="color:red;">`{{<JSOBJECTNAME.FUNCTIONAME.data>}}(`</mark> <mark style="color:red;"></mark><mark style="color:red;"></mark> <mark style="color:red;"></mark><mark style="color:red;">`{{getFilteredUsersList.userList.data}})`</mark>by reading the function's response. Appsmith handles the JSObject function execution **on page load**. You can modify the async function settings from the settings tab if you wish not to execute the function **on page load**.

**Using a Query**

You have a query that fetches Usersâ€™ information, returns the response, and binds it to the table widget to display data.

{% embed url="https://youtu.be/hqkI0h7DQ-s" %}
How to trigger a query execution from a Sync field?
{% endembed %}

To read data by calling a query:&#x20;

* Click on the **+** icon next to the **queries/js** and create a new query.
* Select `DatabaseName` for which you want to add Query.
* Rename the query to <mark style="color:red;">`fetchUsersList.`</mark>

Assuming that the table name is Users. Add the following code to the query editor.

{% hint style="info" %}
Replace **users** with the **table name** in your database.
{% endhint %}

```sql
SELECT * FROM users ORDER BY id LIMIT 10;
```

An execution call to the query <mark style="color:red;">`fetchUsersList.run()`</mark> will throw an error as table data expects data and cannot perform query execution. However, you can read the query response and use it in the Table data to display records by using <mark style="color:red;">`{{<QUERY_NAME.data>}}(fetchUsersList.data)`</mark>. Appsmith handles the query execution **on page load**. You can modify the query settings from the settings tab if you wish not to execute the query **on page load**.

## **Events**

You can trigger the actions by binding them with Async fields. For example, you want to show a success message on the submission of a button by using <mark style="color:red;">`showAlert()`</mark>. You'll have to bind the \[<mark style="color:red;">`showAlert()`</mark>]\(Add a link to Actions - Show Alert method) function on the <mark style="color:red;">`onClick()`</mark> event.

{% hint style="info" %}
You can only use the **global actions** provided out-of-the-box by Appsmith in the **async** **fields**, which are events or actions.
{% endhint %}

{% embed url="https://youtu.be/tjJIDkoCyQE" %}
Execute a global function from an async field
{% endembed %}

### Handling Success / Error

The property pane allows us to configure the action to take once a Query returns with a success or an error. The Success / Error returned by the API/Query can be determined by the HTTP status code or the query response status.

We can decide to display a success or an error message by using the [**showAlert action**](broken-reference/).

![](<../../.gitbook/assets/error handling.gif>)

## Complex Workflows

The GUI is limited to a single [onSuccess](broken-reference/) / [onError](broken-reference/) callback, while the underlying framework has no limitation. To write complex workflows that cannot be accommodated in the GUI, click on the **JS** icon next to the event name & enable JavaScript. Now you can write conditional workflows and chain multiple Queries.

![](<../../.gitbook/assets/conditional query.gif>)

{% hint style="success" %}
Once you have configured [actions](broken-reference/) using the GUI, you can click on the JS icon next to the event to show the JavaScript equivalent of your configuration. It can help you learn to use JavaScript to configure workflows!
{% endhint %}

### Executing Queries in Parallel / Serial

Each query object has a [run](../../reference/appsmith-framework/query-object.md#run) method used to execute the query. To execute multiple queries, you have to separate the run statement in the buttons <mark style="color:red;">`onClick`</mark> handler with a semicolon<mark style="color:red;">(;)</mark>. The [run](broken-reference/) method is asynchronous, and you can execute multiple queries in parallel as below:

```javascript
{{ API1.run(); Query2.run(); API2.run(); }}
```

or chained to be called <mark style="color:red;">`onSuccess / onError`</mark> using the callback arguments in the [Run Signature](broken-reference/).

```javascript
{{ 
    updateUsers.run()
	    .then(() => fetchUsers.run()
	                .then(() => { 
	                    showAlert('User Updated'); 
	                    closeModal('Modal1'); 
		                })
				.catch(() => showAlert("Fetch Users Failed"))
	    ).catch(() => showAlert("Update User Failed", "error")) 
}}
```

The following example shows how you can run two queries on a single click event:

{% embed url="https://youtu.be/flCSSNTwWc4" %}
Example | Executing Queries in Parallel&#x20;
{% endembed %}

You'll see that **Query 1** includes information about location, pin code, email address, and phone number, and **Query 2** includes information about name, gender, and ID.

To run both the queries:

* Drag and drop two table widgets into the canvas.
* In the [Table Data](../../reference/widgets/table/#table-data) section, call your query.

```javascript
{{Query1.data}} //For Table 1

{{Query2.data}} // For Table 2
```

* Add a [button widget](../../reference/widgets/button/) to call both queries simultaneously.&#x20;
* In the button's **onClick** event, toggle the **JS** option and paste the below code:

```javascript
{{Query1.run(); Query2.run()}}
```

You can execute multiple queries simultaneously with this command.

### Conditional Execution

[Queries](../data-access-and-binding/querying-a-database/) can also be chained to execute conditionally based on the value of a widget or the response of a Query

<pre class="language-javascript" data-overflow="wrap"><code class="lang-javascript">{{ 
  statusDropdown.selectedOptionValue === "Pending" ?
      fetchPendingUsers.run(() => {
<strong>          fetchPendingUsers.data.length === 0 
</strong><strong>          ? showAlert("No Users Pending Approval", "info") 
</strong><strong>          : showAlert("Fetched Users", "success");
</strong>      }) 
      : fetchApprovedUsers.run();
}}</code></pre>

{% hint style="success" %}
Use the [Appsmith Framework](<../../reference/appsmith-framework/README (1).md>) and [External Libraries](ext-libraries.md) to build logic into your applications quickly.
{% endhint %}
